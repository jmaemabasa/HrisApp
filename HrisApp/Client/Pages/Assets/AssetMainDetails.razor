@page "/main-asset/details/{id:int}"

@attribute [Authorize(Roles = "HR, System Administrator")]
<PageTitle>Main Asset</PageTitle>

<MudGrid Spacing="3">
    <MudItem xs="12" lg="3">
        <div class="mainassleft" style="margin-top: 10px;">
            <div class="d-flex flex-column justify-content-center ">
                <div class="d-flex justify-content-between align-items-center">
                    <span class="spantitle">Main Asset</span>
                    <AuthorizeView Roles="HR, System Administrator">
                        <Authorized>
                            <button class="Btn" onclick="@(() => OpenDrawer(Anchor.End, "leftPanelOpen"))">

                                <div class="sign"><MudIcon Icon="@Icons.Material.Rounded.Edit"></MudIcon></div>

                                <div class="text">Update</div>
                            </button>
                        </Authorized>
                    </AuthorizeView>
                </div>
                <div class="d-flex flex-column gap-2" style="margin-top: 1rem;">
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Workstation Name</MudText>
                        <MudText Align="Align.Start" Style="color: #27374D; font-weight:bold;" Typo="Typo.body2">@obj.WorksationName</MudText>
                    </div>
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Type</MudText>
                        <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Type?.AType_Name</MudText>
                    </div>
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Category</MudText>
                        <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Category?.ACat_Name</MudText>
                    </div>
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Sub Category</MudText>
                        <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.SubCategory?.ASubCat_Name</MudText>
                    </div>
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Location</MudText>
                        <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Location</MudText>
                    </div>
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Status</MudText>
                        @if (obj.AssetStatusId == 2)
                        {
                            <MudText Align="Align.Start" Style="color: gray; font-weight:bold;" Typo="Typo.body2">@obj.AssetStatus?.Name</MudText>
                        }
                        else if (obj.AssetStatusId == 3)
                        {
                            <MudText Align="Align.Start" Style="color: #7567b8; font-weight:bold;" Typo="Typo.body2">@obj.AssetStatus?.Name</MudText>
                        }
                        else if (obj.AssetStatusId == 4)
                        {
                            <MudText Align="Align.Start" Style="color: #9caac1; font-weight:bold;" Typo="Typo.body2">@obj.AssetStatus?.Name</MudText>
                        }
                        else if (obj.AssetStatusId == 5)
                        {
                            <MudText Align="Align.Start" Style="color: #e38d0f; font-weight:bold;" Typo="Typo.body2">@obj.AssetStatus?.Name</MudText>
                        }
                        else if (obj.AssetStatusId == 6)
                        {
                            <MudText Align="Align.Start" Style="color: #be1313; font-weight:bold;" Typo="Typo.body2">@obj.AssetStatus?.Name</MudText>
                        }
                        else
                        {
                            <MudText Align="Align.Start" Style="color: #397763; font-weight:bold;" Typo="Typo.body2">@obj.AssetStatus?.Name</MudText>
                        }
                    </div>
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Last Checked On</MudText>
                        <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.LastCheckDate?.ToString("MMM dd yyyy")</MudText>
                    </div>
                </div>
            </div>
        </div>
        <div class="mainassleft" style="margin-top: 25px;">
            <div class="d-flex flex-column justify-content-center ">
                <div class="d-flex justify-content-between align-items-center">
                    <span class="spantitle">Assigned To</span>
                    <AuthorizeView Roles="HR, System Administrator">
                        <Authorized>
                            <button class="Btn" onclick="@(() => OpenDrawer(Anchor.End, "assignPanelOpen"))">

                                <div class="sign"><MudIcon Icon="@Icons.Material.Rounded.AssignmentInd"></MudIcon></div>

                                <div class="text">Assign</div>
                            </button>
                        </Authorized>
                    </AuthorizeView>
                </div>
                <div class="d-flex flex-column gap-2" style="margin-top: 1rem;">
                    @if (obj.EmployeeId == null)
                    {
                        <span>No yet assigned</span>
                    }
                    else
                    {
                        <div class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Employee Name</MudText>
                            <MudText Align="Align.Start" Style="color: #27374D; font-weight:bold;" Typo="Typo.body2">@obj.Employee?.FirstName @obj.Employee?.LastName</MudText>
                        </div>
                        <div class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Division / Department</MudText>
                            <MudText Align="Align.Start" Style="color: #27374D; font-weight:bold;" Typo="Typo.body2">@obj.Employee?.Division?.Name / @obj.Employee?.Department?.Name</MudText>
                        </div>
                    }
                </div>
            </div>
        </div>
    </MudItem>

    <MudItem xs="12" lg="9">
        <div class="mainassmain">
            <div class="mainasssec">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span class="spantitle">Details</span>
                    <AuthorizeView Roles="HR, System Administrator">
                        <Authorized>
                            <button class="Btn" onclick="@(() => OpenDrawer(Anchor.End, "detailsPanelOpen"))">

                                <div class="sign"><MudIcon Icon="@Icons.Material.Rounded.Edit"></MudIcon></div>

                                <div class="text">Update</div>
                            </button>
                        </Authorized>
                    </AuthorizeView>
                </div>
                <div class="d-flex flex-column gap-3">
                    <div class="d-flex flex-row gap-4">
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Brand</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Brand</MudText>
                        </MudItem>
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Model</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Model</MudText>
                        </MudItem>
                    </div>
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Serial</MudText>
                        <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Serial</MudText>
                    </div>
                    <div class="d-flex flex-row gap-4">
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Device ID</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.DeviceID</MudText>
                        </MudItem>
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Product ID</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.ProductID</MudText>
                        </MudItem>
                    </div>
                    <div class="d-flex flex-row gap-4">
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Processor</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Processor</MudText>
                        </MudItem>
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">RAM (GB) Recommended 8</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.RAM</MudText>
                        </MudItem>
                    </div>
                    <div class="d-flex flex-row gap-4">
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Storage (GB) Recommended 500</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Storage</MudText>
                        </MudItem>
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Storage Type Recommended SSD</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.StorageType</MudText>
                        </MudItem>
                    </div>
                    <div class="d-flex flex-row gap-4">
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Mac Address</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.MacAddress</MudText>
                        </MudItem>
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Client IP</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.ClientIP</MudText>
                        </MudItem>
                    </div>
                    <div class="d-flex flex-row gap-4">
                        <MudItem xs="12" sm="4" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Purchase Date</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.PurchaseDate?.ToString("MMM dd yyyy")</MudText>
                        </MudItem>
                        <MudItem xs="12" sm="4" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Purchase Amount</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.PurchaseAmount</MudText>
                        </MudItem>
                        <MudItem xs="12" sm="4" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">End of Life (Months)</MudText>
                            @{
                                var isEuf = obj.PurchaseDate.HasValue && DateTime.Today > obj.PurchaseDate.Value.AddMonths(Convert.ToInt32(obj.EUF));
                            }
                            @if (isEuf)
                            {
                                <MudText Align="Align.Start" Style="color: #be1313; font-weight:bold;" Typo="Typo.body2">@obj.EUF Months</MudText>
                            }
                            else
                            {
                                <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.EUF Months</MudText>
                            }
                        </MudItem>
                    </div>
                    <div class="d-flex flex-row gap-4">
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Username Admin</MudText>
                            <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.UsernameAdmin</MudText>
                        </MudItem>
                        <MudItem xs="12" sm="6" Class="divsingledetails">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Password Admin</MudText>
                                    <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@PasswordHolder</MudText>
                                </div>
                                <div>
                                    <MudIconButton Icon="@_passwordDisplayIcon" aria-label="show password" OnClick="DisplayPassword" Style="color: #757A90" />
                                </div>
                            </div>
                        </MudItem>
                    </div>
                    <div class="divsingledetails">
                        <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Remarks</MudText>
                        <MudText Align="Align.Start" Style="color: #757A90; font-weight:bold;" Typo="Typo.body2">@obj.Remarks</MudText>
                    </div>
                </div>
            </div>
            <div class="mainasssec" style="margin-top: 25px;">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span class="spantitle">Asset Accessories</span>
                    <AuthorizeView Roles="HR, System Administrator">
                        <Authorized>
                            <button class="Btn" @onclick="OpenManageAccessories">

                                <div class="sign"><MudIcon Icon="@Icons.Material.Rounded.Add"></MudIcon></div>

                                <div class="text">Add</div>
                            </button>
                        </Authorized>
                    </AuthorizeView>
                </div>
                <div class="d-flex flex-column">
                    @foreach (var item in ACCESSORIES.Where(e => e.MainAssetId == obj.Id))
                    {
                        <div class="d-flex acc-cont" @onclick="()=>OpenAccessoriesDialog(item.Id)">
                            <MudItem xs="12" sm="3"><span class="asset">@item.Asset</span></MudItem>
                            <MudItem xs="12" sm="4"><span>@item.SubCategory?.ASubCat_Name</span></MudItem>
                            <MudItem xs="12" sm="2"><span>@item.PurchaseDate?.ToString("MMM dd yyyy")</span></MudItem>

                            @{
                                var isEuf = item.PurchaseDate.HasValue && DateTime.Today > item.PurchaseDate.Value.AddMonths(Convert.ToInt32(item.EUF));
                            }

                            @if (isEuf)
                            {
                                <MudItem xs="12" sm="2"><span style="color: #be1313">@item.EUF Months</span></MudItem>
                            }
                            else
                            {
                                <MudItem xs="12" sm="2"><span>@item.EUF Months</span></MudItem>
                            }

                            @if (item.AssetStatusId == 2)
                            {
                                <MudItem xs="12" sm="2"><span style="color: gray;">@item.AssetStatus?.Name</span></MudItem>
                            }
                            else if (item.AssetStatusId == 3)
                            {
                                <MudItem xs="12" sm="2"><span style="color: #7567b8;">@item.AssetStatus?.Name</span></MudItem>
                            }
                            else if (item.AssetStatusId == 4)
                            {
                                <MudItem xs="12" sm="2"><span style="color: #9caac1;">@item.AssetStatus?.Name</span></MudItem>
                            }
                            else if (item.AssetStatusId == 5)
                            {
                                <MudItem xs="12" sm="2"><span style="color: #e38d0f;">@item.AssetStatus?.Name</span></MudItem>

                            }
                            else if (item.AssetStatusId == 6)
                            {
                                <MudItem xs="12" sm="2"><span style="color: #be1313;">@item.AssetStatus?.Name</span></MudItem>
                            }
                            else
                            {
                                <MudItem xs="12" sm="2"><span style="color: #397763;">@item.AssetStatus?.Name</span></MudItem>
                            }
                        </div>
                    }
                </div>
            </div>
        </div>
    </MudItem>
</MudGrid>

<MudDrawer @bind-Open="@leftPanelOpen" Width="500px" Height="100%" Anchor="@anchor" Elevation="1" Variant="@DrawerVariant.Temporary" Style=" margin: 10px;">
    <div class="d-flex flex-column gap-2 drawerdetails">
        <span>Update</span>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Workstation Name</MudText>
            <MudTextField @bind-Value="obj.WorksationName" Variant="Variant.Outlined" Margin="Margin.Dense" />
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Type</MudText>
            <MudSelect @bind-Value="obj.TypeId" Variant="Variant.Outlined" Margin="Margin.Dense">
                <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                @foreach (var sec in TYPES)
                {
                    <MudSelectItem Value="@sec.Id">@sec.AType_Name</MudSelectItem>
                }
            </MudSelect>
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Category</MudText>
            <MudSelect @bind-Value="obj.CategoryId" Variant="Variant.Outlined" Margin="Margin.Dense">
                <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                @foreach (var sec in CAT)
                {
                    <MudSelectItem Value="@sec.Id">@sec.ACat_Name</MudSelectItem>
                }
            </MudSelect>
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Sub Category</MudText>
            <MudSelect @bind-Value="obj.SubCategoryId" Variant="Variant.Outlined" Margin="Margin.Dense">
                <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                @foreach (var sec in SUBCAT.Where(e => e.CategoryId == obj.CategoryId))
                {
                    <MudSelectItem Value="@sec.Id">@sec.ASubCat_Name</MudSelectItem>
                }
            </MudSelect>
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Location</MudText>
            <MudTextField @bind-Value="obj.Location" Variant="Variant.Outlined" Margin="Margin.Dense" />
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Status</MudText>
            <MudSelect @bind-Value="obj.AssetStatusId" Variant="Variant.Outlined" Margin="Margin.Dense">
                <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                @foreach (var sec in STATUS)
                {
                    <MudSelectItem Value="@sec.Id">@sec.Name</MudSelectItem>
                }
            </MudSelect>
        </div>
        @if (obj.AssetStatusId != 1 && obj.AssetStatusId != 2)
        {
            <div class="flex-grow-1">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">
                    @{
                        var tes = STATUS.Where(e => e.Id == obj.AssetStatusId).FirstOrDefault();
                    }
                    @tes?.Name DATE
                </MudText>
                <MudDatePicker Editable="true" @bind-Date="obj.StatusDate" Mask="@(new DateMask("MM/dd/yyyy"))" DateFormat="MM/dd/yyyy" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
        }
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Last Check On</MudText>
            <MudDatePicker Editable="true" @bind-Date="obj.LastCheckDate" Mask="@(new DateMask("MM/dd/yyyy"))" DateFormat="MM/dd/yyyy" Variant="Variant.Outlined" Margin="Margin.Dense" />
        </div>
        <div class="d-flex justify-content-center">
            <button type="button" class="btn btn-save" @onclick="SaveUpdate">Save</button>
        </div>
    </div>
</MudDrawer>

<MudDrawer @bind-Open="@detailsPanelOpen" Width="500px" Height="100%" Anchor="@anchor" Elevation="1" Variant="@DrawerVariant.Temporary" Style=" margin: 10px;">
    <div class="d-flex flex-column gap-2 drawerdetails">
        <span>Update</span>
        <div class="row">
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Brand</MudText>
                <MudTextField @bind-Value="obj.Brand" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Model</MudText>
                <MudTextField @bind-Value="obj.Model" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Serial</MudText>
            <MudTextField @bind-Value="obj.Serial" Variant="Variant.Outlined" Margin="Margin.Dense" />
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Device ID</MudText>
            <MudTextField @bind-Value="obj.DeviceID" Variant="Variant.Outlined" Margin="Margin.Dense" />
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Product ID</MudText>
            <MudTextField @bind-Value="obj.ProductID" Variant="Variant.Outlined" Margin="Margin.Dense" />
        </div>
        <div class="row">
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Processor</MudText>
                <MudTextField @bind-Value="obj.Processor" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">RAM (GB) Recommended 8</MudText>
                <MudTextField @bind-Value="obj.RAM" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Storage (GB) Recommended 500</MudText>
                <MudTextField @bind-Value="obj.Storage" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Storage Type Recommended SSD</MudText>
                <MudSelect @bind-Value="obj.StorageType" Variant="Variant.Outlined" Margin="Margin.Dense">
                    <MudSelectItem Value="@("SSD")" />
                    <MudSelectItem Value="@("HDD")" />
                    <MudSelectItem Value="@("NVME")" />
                </MudSelect>
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Mac Address</MudText>
                <MudTextField @bind-Value="obj.MacAddress" Mask="@MacAddMask" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Client IP</MudText>
                <MudTextField @bind-Value="obj.ClientIP" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Purchase Date</MudText>
                <MudDatePicker Editable="true" @bind-Date="obj.PurchaseDate" Mask="@(new DateMask("MM/dd/yyyy"))" DateFormat="MM/dd/yyyy" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Purchase Amount</MudText>
                <MudTextField @bind-Value="obj.PurchaseAmount" Mask="@currMask" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Username Admin</MudText>
                <MudTextField @bind-Value="obj.UsernameAdmin" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </div>
            <div class="col-12 col-lg-6">
                <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Password Admin</MudText>
                <MudTextField @bind-Value="obj.PasswordAdmin" Variant="Variant.Outlined" Margin="Margin.Dense" Adornment="Adornment.End" InputType="@_passwordInput" AdornmentIcon="@_passwordInputIcon" OnAdornmentClick="ButtonShowPassword" AdornmentAriaLabel="Show Password" />
            </div>
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Remarks</MudText>
            <MudTextField @bind-Value="obj.Remarks" Variant="Variant.Outlined" Margin="Margin.Dense" />
        </div>
        <div class="d-flex justify-content-center">
            <button type="button" class="btn btn-save" @onclick="SaveUpdate">Save</button>
        </div>
    </div>
</MudDrawer>

<MudDrawer @bind-Open="@assignPanelOpen" Width="500px" Height="100%" Anchor="@anchor" Elevation="1" Variant="@DrawerVariant.Temporary" Style=" margin: 10px;">
    <div class="d-flex flex-column gap-2 drawerdetails">
        <span>Assign Employee to @obj.WorksationName</span>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Division</MudText>
            <MudSelect T="int" ValueChanged="OnDivChange" Variant="Variant.Outlined" Margin="Margin.Dense">
                <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                @foreach (var sec in DIVISION)
                {
                    <MudSelectItem Value="@sec.Id">@sec.Name</MudSelectItem>
                }
            </MudSelect>
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Department</MudText>
            <MudSelect T="int" ValueChanged="OnDepChange" Disabled="isdisableDept" Variant="Variant.Outlined" Margin="Margin.Dense">
                <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                @foreach (var sec in DEPARTMENT.Where(e => e.DivisionId == divid))
                {
                    <MudSelectItem Value="@sec.Id">@sec.Name</MudSelectItem>
                }
            </MudSelect>
        </div>
        <div class="flex-grow-1">
            <MudText Align="Align.Start" Style="color: #6A707D;" Typo="Typo.caption">Employee</MudText>
            <MudSelect @bind-Value="empid" Disabled="isdisableEmp" Variant="Variant.Outlined" Margin="Margin.Dense">
                <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                @foreach (var sec in EMPLOYEE.Where(e => e.DivisionId == divid && e.DepartmentId == deptid && e.StatusId == 1))
                {
                    <MudSelectItem Value="@sec.Id">@sec.FirstName @sec.LastName</MudSelectItem>
                }
            </MudSelect>
        </div>
        <div class="d-flex justify-content-center">
            <button type="button" class="btn btn-save" @onclick="SaveAssignEmp">Save</button>
        </div>
    </div>
</MudDrawer>