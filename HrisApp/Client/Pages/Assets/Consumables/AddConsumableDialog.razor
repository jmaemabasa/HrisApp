<MudDialog Style="background-color: #e9ecef;">
    <DialogContent>
        <div class="container-fluid">
            <div class="row">
                <div class="col">
                    <div class="addmainassetcont">
                        <div class="row">
                            <div class="col-12" style="font-size: 20px;font-weight: bold;margin-bottom: 11px;color: #27374D;">
                                New Consumable
                            </div>
                            <div class="col-12 col-md-3">
                                @*  IMAGE  *@
                                <div class="section-title">Image</div>
                                @if (imgBase64 == "./images/addIconImage.png")
                                {
                                    <MudFileUpload T="IBrowserFile" OnFilesChanged="@uploadImage" Accept="image/*" capture>
                                        <ButtonTemplate>
                                            <MudButton Class="btnimage" DisableElevation HtmlTag="label" Variant="Variant.Outlined" for="@context">
                                                <div style="height: 240px; display: flex; justify-content: center; align-items: center; ">
                                                    <MudImage Src="@imgBase64" Style="height: 100px; width: 100px; " />
                                                </div>
                                            </MudButton>
                                        </ButtonTemplate>
                                    </MudFileUpload>
                                }
                                else
                                {
                                    <MudFileUpload T="IBrowserFile" OnFilesChanged="@uploadImage" Accept="image/*" capture>
                                        <ButtonTemplate>
                                            <MudButton Class="w-100 btnimagewithimage" DisableElevation HtmlTag="label" for="@context">
                                                <div style="height: 240px; display: flex; justify-content: center; align-items: center;  border-radius: 20px; padding:0px">
                                                    <MudImage Src="@imgBase64" Style="height: 95%; width: auto; max-width:100%; border-radius: 20px; border: none; " />
                                                </div>
                                            </MudButton>
                                        </ButtonTemplate>
                                    </MudFileUpload>
                                }
                            </div>
                            <div class="col">
                                @*  RIGHT PANEL  *@
                                <div class="section-title">Details</div>
                                <div class="row">
                                    <div class="col-12">
                                        <MudText Typo="Typo.body2">Type</MudText>
                                        <MudSelect T="int" ValueChanged="OnChangeType" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;">
                                            <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                                            @foreach (var sec in TYPES)
                                            {
                                                <MudSelectItem Value="@sec.Id">@sec.AType_Name</MudSelectItem>
                                            }
                                        </MudSelect>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <MudText Typo="Typo.body2">Category</MudText>
                                        <MudSelect T="int" ValueChanged="OnChangeCat" Disabled="@disabledcat" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;">
                                            <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                                            @foreach (var sec in CAT)
                                            {
                                                <MudSelectItem Value="@sec.Id">@sec.ACat_Name</MudSelectItem>
                                            }
                                        </MudSelect>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <MudText Typo="Typo.body2">Sub Category</MudText>
                                        <MudSelect T="int" ValueChanged="OnChangeSCat" Disabled="@disabledsubcat" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;">
                                            <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                                            @foreach (var sec in SUBCAT.Where(e => e.CategoryId == obj.CategoryId))
                                            {
                                                <MudSelectItem Value="@sec.Id">@sec.ASubCat_Name</MudSelectItem>
                                            }
                                        </MudSelect>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <MudText Typo="Typo.body2">Asset Code</MudText>
                                        <MudTextField @bind-Value="obj.AssetCode" ReadOnly Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;font-weight:bold;" />
                                    </div>
                                </div>
                                @if (!string.IsNullOrEmpty(obj.AssetCode))
                                {
                                    <div class="row">
                                        <div class="col-12">
                                            <MudText Typo="Typo.body2">Location</MudText>
                                            <MudSelect T="int" @bind-Value="obj.AreaId" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;">
                                                <MudSelectItem Disabled="true" Value="0">Select</MudSelectItem>
                                                @foreach (var sec in AREA)
                                                {
                                                    <MudSelectItem Value="@sec.Id">@sec.Name</MudSelectItem>
                                                }
                                            </MudSelect>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-col-sm-12 col-md-6">
                                            <MudText Typo="Typo.body2">Name</MudText>
                                            <MudTextField @bind-Value="obj.Cons_Name" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;" />
                                        </div>

                                        <div class="col-col-sm-12 col-md-6">
                                            <MudText Typo="Typo.body2">Product ID</MudText>
                                            <MudTextField @bind-Value="obj.ProductID" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <MudText Typo="Typo.body2">Description</MudText>
                                            <MudTextField @bind-Value="obj.Cons_Desc" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-col-sm-12 col-md-6">
                                            <MudText Typo="Typo.body2">Quantity</MudText>
                                            <MudNumericField T="int" TextChanged="QuantityTotal" Immediate="true" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;" />
                                        </div>

                                        <div class="col-col-sm-12 col-md-6">
                                            <MudText Typo="Typo.body2">Unit of Measurement</MudText>
                                            <MudSelect @bind-Value="uomHolder" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;">
                                                @foreach (var sec in UOM)
                                                {
                                                    <MudSelectItem Value="@sec.Id">@sec.Description</MudSelectItem>
                                                }
                                            </MudSelect>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-col-sm-12 col-md-4">
                                            <MudText Typo="Typo.body2">Purchase Date</MudText>
                                            <MudDatePicker Editable="true" @bind-Date="obj.PurchaseDate" Mask="@(new DateMask("MM/dd/yyyy"))" DateFormat="MM/dd/yyyy" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;" />
                                        </div>

                                        <div class="col-col-sm-12 col-md-4">
                                            <MudText Typo="Typo.body2">Price</MudText>
                                            <MudNumericField T="decimal" TextChanged="PriceTotal" Immediate="true" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;" />
                                        </div>

                                        <div class="col-col-sm-12 col-md-4">
                                            <MudText Typo="Typo.body2">Purchase Total Amount</MudText>
                                            <MudNumericField @bind-Value="obj.TotalPurchaseAmount" ReadOnly Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="d-flex flex-column">
                                            <div class="flex-grow-1">
                                                <MudText Typo="Typo.body2">Remarks</MudText>
                                                <div class="d-flex">
                                                    <MudTextField @bind-Value="newRemark" Variant="Variant.Outlined" Margin="Margin.Dense" Style="margin-bottom: 5px;" />
                                                    <MudButton Style="width: 150px;" Class="btnsmallsapos" Variant="Variant.Filled" OnClick="@(() => AddNewRemark(obj.AssetCode, newRemark))">Add Remark</MudButton>
                                                </div>
                                            </div>
                                            <div class="d-flex flex-wrap flex-grow-1">
                                                <MudChipSet AllClosable="true" OnClose="CloseRemark">
                                                    @foreach (var item in listOfNewRemarks)
                                                    {
                                                        <MudChip Style="color: #fafaf5; background-color: #424242;" Text="@item.Remark"></MudChip>
                                                    }
                                                </MudChipSet>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-12 tab-buttons d-flex gap-2 justify-content-end">
                                            <button type="button" class="btn cancel" @onclick="Cancel">Cancel</button>
                                            <button type="button" class="save btn" @onclick="ConfirmCreate">Save</button>
                                        </div>
                                    </div>
                                }
                                else
                                {

                                    <div class="row">
                                        <div class="col-12 tab-buttons d-flex gap-2 justify-content-end">
                                            <button type="button" class="btn cancel" @onclick="Cancel">Cancel</button>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </DialogContent>
</MudDialog>